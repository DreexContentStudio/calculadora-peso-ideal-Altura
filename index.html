<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculadora de peso ideal</title>
  <style>
    :root{--bg:#f6f8fb;--card:#ffffff;--accent:#4f46e5;--muted:#6b7280}
    *{box-sizing:border-box}
    body{font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);margin:0;padding:28px;display:flex;align-items:center;justify-content:center;min-height:100vh}
    .card{background:var(--card);width:100%;max-width:820px;border-radius:14px;padding:22px;box-shadow:0 6px 20px rgba(31,41,55,0.06)}
    h1{margin:0 0 8px;font-size:20px}
    p.lead{margin:0 0 16px;color:var(--muted)}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .col{flex:1;min-width:150px}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type="number"],select{width:100%;padding:10px;border-radius:8px;border:1px solid #e6e9ef;font-size:15px}
    .unit-toggle{display:flex;gap:8px}
    .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:0;font-weight:600;cursor:pointer}
    .results{margin-top:18px;padding:14px;border-radius:10px;background:linear-gradient(180deg,#ffffff,#fbfbff);border:1px solid #eef2ff}
    .r-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed #eee}
    .r-item:last-child{border-bottom:0}
    .muted{color:var(--muted);font-size:13px}
    .small{font-size:13px}
    footer{margin-top:14px;color:var(--muted);font-size:13px}
    @media (max-width:520px){.row{flex-direction:column}}
  </style>
</head>
<body>
  <div class="card" role="main">
    <h1>Calculadora de peso ideal</h1>
    <p class="lead">Estimaciones basadas en fórmulas médicas comunes (Hamwi, Devine, Robinson, Miller). Elige tu género y altura. Resultado: rango y promedio para orientarte.</p>

    <div class="row">
      <div class="col">
        <label>Género</label>
        <select id="gender" aria-label="Género">
          <option value="male">Hombre</option>
          <option value="female">Mujer</option>
          <option value="other">Otro / Prefiero no decir</option>
        </select>
      </div>
      <div class="col">
        <label>Unidad de altura</label>
        <div class="unit-toggle">
          <select id="unit" aria-label="Unidad de altura">
            <option value="cm">Centímetros (cm)</option>
            <option value="ft">Pies + pulgadas (ft/in)</option>
          </select>
        </div>
      </div>
    </div>

    <div id="heightCm" class="row" style="margin-top:12px">
      <div class="col">
        <label>Altura (cm)</label>
        <input id="height_cm" type="number" min="80" max="250" step="0.1" placeholder="ej. 170" />
      </div>
    </div>

    <div id="heightFt" class="row" style="margin-top:12px;display:none">
      <div class="col">
        <label>Pies</label>
        <input id="height_ft" type="number" min="3" max="8" step="1" placeholder="ej. 5" />
      </div>
      <div class="col">
        <label>Pulgadas</label>
        <input id="height_in" type="number" min="0" max="11" step="1" placeholder="ej. 7" />
      </div>
    </div>

    <div class="row" style="margin-top:12px;align-items:end">
      <div class="col">
        <label>Edad (opcional)</label>
        <input id="age" type="number" min="5" max="120" placeholder="ej. 30" />
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <button id="calcBtn" class="btn">Calcular</button>
      </div>
    </div>

    <div id="results" class="results" style="display:none" aria-live="polite">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>Resultados</strong>
        <span class="muted small" id="heightLabel"></span>
      </div>
      <div id="outList" style="margin-top:10px"></div>
      <div style="margin-top:10px" class="muted small">Rango: promediamos varias fórmulas para darte un intervalo orientativo. Consulta con un profesional de la salud para recomendaciones personalizadas.</div>
    </div>

    <footer>
      <div class="small">Fórmulas usadas: Hamwi, Devine, Robinson y Miller. No reemplaza valoración médica.</div>
    </footer>
  </div>

  <script>
    const unit = document.getElementById('unit');
    const heightCm = document.getElementById('heightCm');
    const heightFt = document.getElementById('heightFt');
    unit.addEventListener('change', ()=>{
      if(unit.value==='cm'){heightCm.style.display='flex';heightFt.style.display='none'}else{heightCm.style.display='none';heightFt.style.display='flex'}
    });

    function cmFromFtIn(ft,inches){return (ft*12 + inches)*2.54}
    function toMeters(cm){return cm/100}

    // Fórmulas que devuelven kilogramos
    function hamwi(gender,cm){ // Hamwi: Hombre: 48 kg + 1.1 kg por cada 2.54 cm sobre 152 cm (5ft)
      const inchesOver5ft = (cm/2.54) - 60; // 60 inches = 152.4 cm
      if(gender==='female'){
        // Hamwi woman: 45.5 kg + 1.1 kg por inch sobre 5ft
        return 45.5 + Math.max(0,inchesOver5ft)*1.1;
      }
      return 48 + Math.max(0,inchesOver5ft)*1.1;
    }

    function devine(gender,cm){ // Devine: 50 + 2.3 kg per inch over 5ft (men), women 45.5
      const inches = cm/2.54; const over = Math.max(0,inches-60);
      return (gender==='female' ? 45.5 : 50) + 2.3*over;
    }

    function robinson(gender,cm){ // Robinson: men 52 + 1.9 per inch over 5ft; women 49 + 1.7
      const inches = cm/2.54; const over = Math.max(0,inches-60);
      return (gender==='female' ? 49 + 1.7*over : 52 + 1.9*over);
    }

    function miller(gender,cm){ // Miller: men 56.2 + 1.41 per inch, women 53.1 + 1.36
      const inches = cm/2.54; const over = Math.max(0,inches-60);
      return (gender==='female' ? 53.1 + 1.36*over : 56.2 + 1.41*over);
    }

    function bmiFromKgM(kg,m){return kg/(m*m)}

    document.getElementById('calcBtn').addEventListener('click', ()=>{
      const gender = document.getElementById('gender').value;
      let cm;
      if(unit.value==='cm'){
        const h = parseFloat(document.getElementById('height_cm').value);
        if(!h || h<=0){alert('Introduce una altura válida en cm.');return}
        cm = h;
      } else {
        const ft = parseFloat(document.getElementById('height_ft').value);
        const inches = parseFloat(document.getElementById('height_in').value || 0);
        if(!ft || ft<=0){alert('Introduce una altura válida en pies.');return}
        cm = cmFromFtIn(ft,inches);
      }

      // Calcular por fórmulas
      const h1 = hamwi(gender,cm);
      const h2 = devine(gender,cm);
      const h3 = robinson(gender,cm);
      const h4 = miller(gender,cm);
      const arr = [h1,h2,h3,h4].map(x=>Math.round(x*10)/10);
      const avg = Math.round((arr.reduce((a,b)=>a+b,0)/arr.length)*10)/10;
      const min = Math.round(Math.min(...arr)*10)/10;
      const max = Math.round(Math.max(...arr)*10)/10;

      // BMI check using average and by axis
      const meters = toMeters(cm);
      const bmi_avg = Math.round(bmiFromKgM(avg,meters)*10)/10;
      const bmiCategory = bmi_avg < 18.5 ? 'Bajo peso (según BMI)' : bmi_avg < 25 ? 'Normal' : bmi_avg < 30 ? 'Sobrepeso' : 'Obesidad';

      const out = document.getElementById('outList'); out.innerHTML='';
      const labels = ['Hamwi','Devine','Robinson','Miller'];
      arr.forEach((v,i)=>{
        const d = document.createElement('div'); d.className='r-item';
        d.innerHTML = `<div>${labels[i]}</div><div><strong>${v} kg</strong></div>`;
        out.appendChild(d);
      });

      const avgDiv = document.createElement('div'); avgDiv.className='r-item'; avgDiv.innerHTML = `<div>Promedio</div><div><strong>${avg} kg</strong></div>`;
      out.appendChild(avgDiv);

      const rangeDiv = document.createElement('div'); rangeDiv.className='r-item'; rangeDiv.innerHTML = `<div>Rango orientativo</div><div><strong>${min} – ${max} kg</strong></div>`;
      out.appendChild(rangeDiv);

      const bmiDiv = document.createElement('div'); bmiDiv.className='r-item'; bmiDiv.innerHTML = `<div>IMC con promedio</div><div><strong>${bmi_avg} — <span class="muted small">${bmiCategory}</span></strong></div>`;
      out.appendChild(bmiDiv);

      document.getElementById('heightLabel').textContent = `Altura: ${Math.round(cm*10)/10} cm`;
      document.getElementById('results').style.display = 'block';
    });
  </script>
</body>
</html>

